 //ACCUEIL 
// Script pour gérer l'affichage du placeholder si la vidéo n'est pas trouvée
document.addEventListener('DOMContentLoaded', function() {
    const video = document.querySelector('video');
    const placeholder = document.querySelector('.video-placeholder');
    
    video.addEventListener('error', function() {
        video.style.display = 'none';
        placeholder.style.display = 'flex';
    });
    
    // Simuler une erreur si la vidéo n'existe pas (pour la démonstration)
    setTimeout(function() {
        if (video.readyState > 0 && video.error) {
            video.style.display = 'none';
            placeholder.style.display = 'flex';
        }
    }, 1000);
});



//script  affichage du popup d 'un tenue etses pieces
document.addEventListener('DOMContentLoaded', function() {
    var productModal = document.getElementById('productModal');

    productModal.addEventListener('show.bs.modal', function(event) {
        var button = event.relatedTarget;
        var productData = button.getAttribute('data-product');
        var product = JSON.parse(productData);

        // Met à jour contenu modal
        document.getElementById('modalProductImage').src = '/storage/' + product.image_produit;
        document.getElementById('modalProductTitle').textContent = product.nom || 'Titre non disponible';
        document.getElementById('modalProductDescription').textContent = product.description || "Description non disponible.";

        // Affiche les pièces liées
        var piecesContainer = document.getElementById('modalPiecesList');
        piecesContainer.innerHTML = '';

        if(product.pieces && product.pieces.length > 0) {
            product.pieces.forEach(piece => {
                var div = document.createElement('div');
                div.className = 'position-relative';
                div.style.width = '100px';

                div.innerHTML = `
                    <img src="/storage/${piece.image || 'default.jpg'}" alt="${piece.nom}" class="img-fluid rounded">
                    <div>${piece.nom || ''}</div>
                    <button class="btn btn-sm btn-success position-absolute bottom-0 end-0 m-1" title="Acheter la pièce">
                        <i class="fas fa-shopping-cart"></i>
                    </button>
                `;

                piecesContainer.appendChild(div);
            });
        } else {
            piecesContainer.innerHTML = '<p>Aucune pièce liée disponible.</p>';
        }
    });
});
